@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap');

:root {
    /* STELLA "BOTTLE & LABEL" PALETTE */
    --navy-dark: #05101a;    /* The glass bottle in shadow */
    --navy-main: #0e2338;    /* The main label background */
    --navy-light: #18304a;   /* Highlights */
    --gold-main: #eebb00;    /* The Star/Beer (Matte Gold, not Neon) */
    --gold-dim: #997a00;
    --red-accent: #c21e1e;   /* The Ribbon */
    --text-white: #e6e6e6;   /* Off-white for better reading */
    --text-muted: #8493a3;
    
    /* "QUIET" SIZING */
    --radius-sm: 4px;
    --radius-md: 8px;        /* Standard "Soft" corner */
    --radius-lg: 12px;       /* Outer containers */
    
    --player-height: 80px;
    --sidebar-width: 240px;
}

/* === RESET & BASE === */
* { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }

body {
    font-family: 'Roboto', sans-serif;
    background-color: var(--navy-dark);
    color: var(--text-white);
    margin: 0; padding: 0;
    overflow: hidden; height: 100vh;
    display: flex; flex-direction: column;
    user-select: none;
}

/* === SCROLLBARS (Subtle) === */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--navy-light); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--gold-dim); }

/* === TITLE BAR === */
#title-bar {
    height: 30px; display: flex; justify-content: space-between; align-items: center;
    padding: 0 10px; -webkit-app-region: drag; z-index: 5000;
    background: var(--navy-dark);
}
.logo-text {
    font-weight: 900; font-size: 12px; letter-spacing: 2px;
    color: var(--gold-main); text-transform: uppercase;
}
#title-bar-btns { -webkit-app-region: no-drag; display: flex; }
.win-btn {
    background: transparent; border: none; color: var(--text-muted);
    width: 40px; height: 30px; display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: 0.2s;
}
.win-btn:hover { background: var(--navy-light); color: white; }
#close-btn:hover { background: var(--red-accent); }

/* === APP LAYOUT === */
.app-layout {
    display: flex; height: calc(100vh - 30px);
    padding: 10px; gap: 10px;
    background: var(--navy-dark);
    position: relative;
}

/* === SIDEBAR === */
.sidebar {
    width: var(--sidebar-width);
    background: var(--navy-main);
    border-radius: var(--radius-md);
    display: flex; flex-direction: column;
    border: 1px solid var(--navy-light);
}

.nav-links { padding: 15px 10px; }
.nav-btn {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 14px; border-radius: var(--radius-sm);
    color: var(--text-muted); font-weight: 700; font-size: 13px;
    cursor: pointer; transition: 0.2s; margin-bottom: 4px;
}
.nav-btn i { font-size: 18px; width: 20px; text-align: center; }
.nav-btn:hover { background: var(--navy-light); color: white; }
.nav-btn.active {
    background: rgba(238, 187, 0, 0.08); /* Very subtle gold tint */
    color: var(--gold-main);
}

/* Library */
.library-root {
    flex-grow: 1; margin-top: 10px;
    display: flex; flex-direction: column; overflow: hidden;
    padding: 0 5px;
}
.lib-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 14px; color: var(--text-muted); font-size: 11px; 
    font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
}
.icon-btn {
    background: transparent; border: none; color: var(--text-muted);
    cursor: pointer; font-size: 16px; width: 28px; height: 28px; 
    display: flex; align-items: center; justify-content: center;
}
.icon-btn:hover { color: white; }

#playlists { list-style: none; padding: 0 5px; margin: 0; overflow-y: auto; }
.pl-item {
    padding: 8px 12px; border-radius: var(--radius-sm);
    color: var(--text-muted); cursor: pointer; font-size: 13px;
    display: flex; justify-content: space-between; align-items: center;
}
.pl-item:hover { background: var(--navy-light); color: white; }
.pl-item.active { color: var(--gold-main); font-weight: 500; }
.pl-delete { visibility: hidden; color: var(--text-muted); }
.pl-item:hover .pl-delete { visibility: visible; }
.pl-delete:hover { color: var(--red-accent); }

/* Sidebar Art (Hidden mostly, but styled just in case) */
#np-card-sidebar {
    margin: 10px; border-radius: var(--radius-sm); overflow: hidden;
    aspect-ratio: 1; display: none; border: 1px solid var(--navy-light);
}
#np-img { width: 100%; height: 100%; object-fit: cover; }

/* === MAIN VIEW === */
.main-view {
    flex-grow: 1;
    background: linear-gradient(180deg, #122840 0%, #0e2338 100%);
    border-radius: var(--radius-md);
    position: relative; overflow-y: auto; overflow-x: hidden;
    padding: 0 30px 100px 30px; /* Bottom padding protects content from floating player */
    border: 1px solid var(--navy-light);
}

.view-section { padding-top: 30px; display: none; }
.view-section.active { display: block; animation: fadeUp 0.3s ease; }
@keyframes fadeUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

h1 { font-size: 32px; margin: 0 0 10px; font-weight: 700; color: white; letter-spacing: -0.5px; }
h2 { 
    font-size: 18px; margin: 30px 0 15px; font-weight: 700; 
    color: var(--gold-main); text-transform: uppercase; letter-spacing: 1px;
    border-bottom: 2px solid var(--navy-light); display: inline-block; padding-bottom: 5px;
}

/* Card Grid */
.card-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px;
}
.song-card {
    background: var(--navy-main); padding: 12px; border-radius: var(--radius-md);
    cursor: pointer; transition: background 0.2s; border: 1px solid transparent;
}
.song-card:hover { 
    background: var(--navy-light); 
    border-color: rgba(238, 187, 0, 0.3); /* Subtle gold border on hover */
}
.song-img-box {
    width: 100%; aspect-ratio: 1; border-radius: var(--radius-sm); overflow: hidden;
    margin-bottom: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); position: relative;
}
.song-img-box img { width: 100%; height: 100%; object-fit: cover; }

/* Play Button Overlay */
.play-float-btn {
    position: absolute; bottom: 8px; right: 8px;
    width: 40px; height: 40px; border-radius: 50%;
    background: var(--gold-main); color: var(--navy-dark);
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; opacity: 0; transform: translateY(10px);
    transition: all 0.2s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.4);
}
.song-card:hover .play-float-btn { opacity: 1; transform: translateY(0); }
.play-float-btn:hover { background: white; transform: scale(1.05); }

.song-title { font-weight: 700; font-size: 14px; margin-bottom: 4px; color: white; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
.song-desc { font-size: 12px; color: var(--text-muted); }

/* Track Table */
.track-table-header {
    display: grid; grid-template-columns: 40px 1fr 1fr 60px;
    padding: 0 10px; margin-bottom: 8px; border-bottom: 1px solid var(--navy-light);
    color: var(--gold-dim); font-size: 11px; text-transform: uppercase; letter-spacing: 1px;
    height: 30px; align-items: center;
}
.track-row {
    display: grid; grid-template-columns: 40px 1fr 1fr 60px;
    padding: 8px 10px; border-radius: var(--radius-sm); align-items: center;
    font-size: 13px; color: var(--text-muted); cursor: pointer;
}
.track-row:hover { background: var(--navy-light); color: white; }
.track-row.active { color: var(--gold-main); background: rgba(255,255,255,0.05); }
.track-row img { width: 32px; height: 32px; border-radius: 4px; margin-right: 12px; object-fit: cover; }

/* === FLOATING PLAYER BAR (Restructured) === */
.player-bar {
    position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
    width: 95%; max-width: 900px; height: var(--player-height);
    background: rgba(14, 35, 56, 0.582); /* High opacity navy */
    backdrop-filter: blur(10px); 
    border: 1px solid var(--navy-light);
    border-radius: var(--radius-md);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    z-index: 8000;
    backdrop-filter: blur(10px);
    
    /* Strict Grid Layout to prevent overlapping */
    display: grid;
    grid-template-columns: 200px 1fr 150px; /* Fixed Left, Flex Center, Fixed Right */
    align-items: center;
    padding: 0 20px;
}

/* Player Left */
.pb-left { display: flex; align-items: center; overflow: hidden; }
#pb-art-box {
    width: 48px; height: 48px; min-width: 48px; /* Force size */
    margin-right: 12px; border-radius: 4px; overflow: hidden;
    background: #000; display: none;
}
#pb-art { width: 100%; height: 100%; object-fit: cover; }
.pb-info { display: flex; flex-direction: column; overflow: hidden; }
.pb-title { color: white; font-size: 13px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.pb-artist { color: var(--text-muted); font-size: 11px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.pb-heart { margin-left: 10px; font-size: 16px; color: var(--text-muted); background: none; border: none; cursor: pointer; }
.pb-heart.active { color: var(--red-accent); }

/* Player Center (Stacked controls + progress) */
.pb-center { 
    display: flex; flex-direction: column; 
    align-items: center; justify-content: center; 
    width: 100%; padding: 0 20px;
}
.controls { display: flex; align-items: center; gap: 20px; margin-bottom: 5px; }
.ctrl-btn {
    background: none; border: none; color: var(--text-muted); cursor: pointer;
    font-size: 18px; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
}
.ctrl-btn:hover { color: white; }
.ctrl-btn.active { color: var(--gold-main); }
.play-btn {
    background: var(--navy-light); color: var(--gold-main); border-radius: 50%;
    width: 36px; height: 36px; font-size: 18px; border: none;
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.2s;
}
.play-btn:hover { transform: scale(1.1); }

/* Progress Bar */
.progress-bar-area { width: 100%; display: flex; align-items: center; gap: 10px; font-size: 10px; color: var(--text-muted); }
.slider-container { flex-grow: 1; height: 10px; display: flex; align-items: center; cursor: pointer; }
.slider-rail { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; }
.slider-fill { height: 100%; background: var(--gold-main); width: 0%; border-radius: 2px; }
.slider-container:hover .slider-fill { background: white; }

/* Player Right (Volume) */
.pb-right { display: flex; justify-content: flex-end; align-items: center; gap: 10px; }
#vol-slider {
    width: 80px; height: 4px; border-radius: 2px;
    background: linear-gradient(to right, var(--text-muted) 100%, #333 100%);
}
input[type="range"] { -webkit-appearance: none; background: transparent; cursor: pointer; }
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; height: 10px; width: 10px; border-radius: 50%;
    background: white; margin-top: -3px; visibility: visible;
}

/* === MODAL / ALERTS (Centered) === */
#modal-backdrop, #about-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(5, 16, 26, 0.8); backdrop-filter: blur(4px);
    z-index: 9999; display: none; 
    align-items: center; /* Center Vertically */
    justify-content: center; /* Center Horizontally */
}
.modal-content {
    background: var(--navy-main); width: 400px; padding: 24px;
    border-radius: var(--radius-lg); border: 1px solid var(--navy-light);
    box-shadow: 0 10px 40px rgba(0,0,0,0.6); text-align: center;
}
.modal-title { font-size: 20px; font-weight: 700; margin-bottom: 10px; color: white; }
.modal-text { font-size: 14px; color: var(--text-muted); margin-bottom: 20px; }
.modal-input {
    width: 100%; background: var(--navy-dark); border: 1px solid var(--navy-light); 
    color: white; padding: 10px; border-radius: var(--radius-sm); margin-bottom: 20px;
}
.modal-input:focus { border-color: var(--gold-main); }

.modal-actions { display: flex; justify-content: center; gap: 10px; }
.btn-text {
    background: transparent; color: var(--text-muted); padding: 8px 20px;
    border: 1px solid transparent; cursor: pointer; border-radius: var(--radius-sm);
    font-weight: 600;
}
.btn-text:hover { color: white; border-color: var(--text-muted); }
.btn-primary {
    background: var(--gold-main); color: var(--navy-dark); border: none;
    padding: 8px 24px; border-radius: var(--radius-sm); font-weight: 700;
    cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
.btn-primary:hover { background: white; }

/* === CONTEXT MENU === */
#context-menu {
    position: fixed; z-index: 10000; background: var(--navy-main);
    border: 1px solid var(--navy-light); border-radius: var(--radius-sm);
    padding: 4px; min-width: 180px; box-shadow: 0 5px 20px rgba(0,0,0,0.6);
    display: none;
}
.t-meta {
    display: flex;
    align-items: center;
    gap: 1em;
}
.ctx-item {
    padding: 8px 12px; font-size: 13px; color: var(--text-white); cursor: pointer;
    display: flex; align-items: center; gap: 10px; border-radius: 2px;
}
.ctx-item:hover { background: var(--navy-light); color: var(--gold-main); }
.ctx-sep { height: 1px; background: var(--navy-light); margin: 2px 0; }

/* === TOAST === */
#toast {
    position: fixed; bottom: 110px; left: 50%; transform: translateX(-50%);
    background: var(--gold-main); color: var(--navy-dark);
    padding: 10px 24px; border-radius: var(--radius-sm);
    box-shadow: 0 4px 15px rgba(0,0,0,0.4); font-weight: 700; font-size: 13px;
    opacity: 0; pointer-events: none; z-index: 9000;
}

/* === SEARCH === */
#search-input {
    width: 100%; background: var(--navy-dark); border: 1px solid var(--navy-light);
    color: white; padding: 12px 16px; border-radius: 30px; font-size: 15px; margin-bottom: 20px;
}
#search-input:focus { border-color: var(--gold-main); }
.recent-search-tag {
    background: var(--navy-light); color: var(--text-white); padding: 6px 14px; 
    border-radius: 20px; font-size: 12px; cursor: pointer; border: 1px solid transparent;
}
.recent-search-tag:hover { border-color: var(--gold-main); color: var(--gold-main); }

/* === SETTINGS & LOADING === */
#loading-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--navy-dark); z-index: 99999;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
}
.pulse-logo { font-size: 36px; font-weight: 900; color: var(--gold-main); animation: pulse 2s infinite; }
@keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

/* Offline */
#offline-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
    background: var(--navy-dark); z-index: 999999; display: none;
    flex-direction: column; align-items: center; justify-content: center;
}
.alert { background: var(--red-accent); color: white; padding: 12px; border-radius: 4px; }

/* Switch Toggle */
.switch { position: relative; display: inline-block; width: 40px; height: 22px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
    position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--navy-dark); transition: .4s; border-radius: 22px; border: 1px solid var(--navy-light);
}
.slider:before {
    position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px;
    background-color: var(--text-muted); transition: .4s; border-radius: 50%;
}
input:checked + .slider { background-color: var(--gold-main); border-color: var(--gold-main); }
input:checked + .slider:before { transform: translateX(18px); background-color: var(--navy-dark); }

.album-cover {
    width:200px; height:200px; background:var(--navy-light); display:flex; justify-content:center; align-items:center; border-radius: 6px;
    border: 1px solid var(--text-muted);
}
#recent-searches-list {
    display: flex;
    gap: 1em;
    flex-wrap: wrap;
    align-items: center;
}
/* Add/Ensure this is in your style.css */
.icon-btn:hover { 
    background: var(--bg-highlight); 
    color: white !important; /* Force white on hover for colored icons */
}